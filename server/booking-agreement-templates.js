const bookingAgreementTemplates = {
    wedding: {
        name: 'Wedding Photography Agreement',
        category: 'Wedding',
        content: [
            '<h2>Wedding Photography Agreement</h2>',
            '<p><strong>This Professional Services Agreement</strong> is entered into between {{photographerName}} ("Photographer") and {{clientName}} ("Clients") for comprehensive wedding photography services on this special day.</p>',
            '',
            '<h3>Wedding Event Details</h3>',
            '<ul>',
            '    <li><strong>Wedding Date:</strong> {{sessionDate}}</li>',
            '    <li><strong>Ceremony Venue:</strong> {{location}}</li>',
            '    <li><strong>Reception Venue:</strong> {{receptionLocation}}</li>',
            '    <li><strong>Photography Coverage:</strong> {{startTime}} to {{endTime}}</li>',
            '    <li><strong>Primary Contact:</strong> {{clientName}} | {{clientEmail}} | {{clientPhone}}</li>',
            '</ul>',
            '',
            '<h3>Investment & Payment Terms</h3>',
            '<ul>',
            '    <li><strong>Total Collection Investment:</strong> ${{price}}</li>',
            '    <li><strong>Booking Retainer (50%):</strong> ${{depositAmount}}</li>',
            '    <li><strong>Final Balance:</strong> ${{balanceAmount}}</li>',
            '    <li><strong>Final Payment Due:</strong> 14 days prior to wedding date</li>',
            '</ul>',
            '',
            '<h3>Professional Services & Deliverables</h3>',
            '<ul>',
            '    <li><strong>Comprehensive Wedding Coverage:</strong> Professional documentation of your ceremony, reception, and celebrations</li>',
            '    <li><strong>Artistically Edited Images:</strong> High-resolution digital files with professional post-processing</li>',
            '    <li><strong>Private Online Gallery:</strong> Secure gallery for viewing, downloading, and sharing with family and friends</li>',
            '    <li><strong>Full Personal Use Rights:</strong> Complete print release for personal use and family sharing</li>',
            '    <li><strong>Complimentary Engagement Session:</strong> Pre-wedding session to ensure comfort and connection</li>',
            '</ul>',
            '',
            '<h3>Professional Terms & Conditions</h3>',
            '<ol>',
            '    <li><strong>Booking Confirmation:</strong> A non-refundable retainer of ${{depositAmount}} secures your wedding date exclusively and confirms our professional commitment.</li>',
            '    <li><strong>Payment Schedule:</strong> Final balance of ${{balanceAmount}} is due 14 days before your wedding date to ensure seamless service delivery.</li>',
            '    <li><strong>Delivery Timeline:</strong> Your beautifully edited gallery will be delivered within 6-8 weeks, allowing time for meticulous attention to each image.</li>',
            '    <li><strong>Weather Contingency:</strong> Alternative indoor locations will be discussed in advance. Rain often creates the most romantic and dramatic images.</li>',
            '    <li><strong>Creative License:</strong> Photographer retains artistic copyright while clients receive unlimited personal use rights. Images may be featured in professional portfolio with your permission.</li>',
            '    <li><strong>Rescheduling Policy:</strong> Date changes due to unforeseen circumstances can be accommodated subject to availability with 60 days notice.</li>',
            '</ol>',
            '',
            '<h3>Limitation of Liability</h3>',
            '<p>In the unlikely event of photographer illness, natural disaster, or other circumstances beyond our control, we will make every effort to secure a qualified replacement photographer. Our liability is limited to the return of all payments received. We recommend wedding insurance for additional protection.</p>',
            '',
            '<h3>Mutual Agreement</h3>',
            '<p>This agreement represents our mutual understanding and professional commitment to capturing your wedding day beautifully. By signing below, both parties acknowledge and agree to all terms outlined above.</p>',
            '',
            '<div class="signature-section">',
            '    <p><strong>Client Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><strong>Photographer Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><em>{{clientName}}</em></p>',
            '    <p><em>{{clientEmail}} | {{clientPhone}}</em></p>',
            '</div>'
        ].join('\n')
    },
    portrait: {
        name: 'Portrait Session Agreement',
        category: 'Portrait',
        content: [
            '<h2>Portrait Photography Session Agreement</h2>',
            '<p><strong>This Professional Photography Agreement</strong> is entered into between {{photographerName}} ("Photographer") and {{clientName}} ("Client") for a premium portrait photography experience.</p>',
            '',
            '<h3>Session Details</h3>',
            '<ul>',
            '    <li><strong>Session Type:</strong> {{sessionType}} Portrait Experience</li>',
            '    <li><strong>Scheduled Date:</strong> {{sessionDate}}</li>',
            '    <li><strong>Session Time:</strong> {{sessionTime}}</li>',
            '    <li><strong>Location:</strong> {{location}}</li>',
            '    <li><strong>Session Duration:</strong> {{duration}} minutes of professional coverage</li>',
            '    <li><strong>Client Contact:</strong> {{clientName}} | {{clientEmail}} | {{clientPhone}}</li>',
            '</ul>',
            '',
            '<h3>Investment & Payment</h3>',
            '<ul>',
            '    <li><strong>Session Investment:</strong> ${{price}}</li>',
            '    <li><strong>Booking Deposit:</strong> ${{depositAmount}} (required to secure session)</li>',
            '    <li><strong>Remaining Balance:</strong> ${{balanceAmount}} (due at session)</li>',
            '</ul>',
            '',
            '<h3>Professional Services & Deliverables</h3>',
            '<ul>',
            '    <li><strong>Premium Portrait Session:</strong> Professional lighting, posing guidance, and artistic direction</li>',
            '    <li><strong>Expert Image Curation:</strong> Minimum of {{imageCount}} beautifully edited, high-resolution digital images</li>',
            '    <li><strong>Private Online Gallery:</strong> Professional gallery for viewing, downloading, and sharing</li>',
            '    <li><strong>Complete Print Release:</strong> Full personal use license for printing and sharing</li>',
            '    <li><strong>Professional Consultation:</strong> Styling and wardrobe guidance for optimal results</li>',
            '</ul>',
            '',
            '<h3>Professional Terms & Conditions</h3>',
            '<ol>',
            '    <li><strong>Payment Terms:</strong> Booking deposit secures your session date. Remaining balance is due at the time of session via cash, check, or card.</li>',
            '    <li><strong>Flexible Rescheduling:</strong> Sessions may be rescheduled with 48-hour advance notice to accommodate your needs.</li>',
            '    <li><strong>Weather Guarantee:</strong> Outdoor sessions will be rescheduled for optimal lighting conditions at no additional charge.</li>',
            '    <li><strong>Gallery Delivery:</strong> Your beautifully curated gallery will be delivered within 2-3 weeks via secure online access.</li>',
            '    <li><strong>Usage Rights:</strong> You receive full personal use license while photographer retains artistic copyright for portfolio display.</li>',
            '    <li><strong>Satisfaction Commitment:</strong> We are dedicated to your complete satisfaction and will work with you to ensure beautiful results.</li>',
            '</ol>',
            '',
            '<h3>Agreement Acknowledgment</h3>',
            '<p>This agreement represents our mutual commitment to creating beautiful portraits that you will treasure. By signing below, both parties acknowledge and agree to the terms outlined above.</p>',
            '',
            '<div class="signature-section">',
            '    <p><strong>Client Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><strong>Photographer Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><em>{{clientName}}</em></p>',
            '    <p><em>{{clientEmail}} | {{clientPhone}}</em></p>',
            '</div>'
        ].join('\n')
    },
    commercial: {
        name: 'Commercial Photography Agreement',
        category: 'Commercial',
        content: [
            '<h2>Commercial Photography Services Agreement</h2>',
            '<p><strong>This Commercial Photography Agreement</strong> is executed between {{photographerName}} ("Photographer") and {{clientName}} ("Client") for professional commercial imaging services.</p>',
            '',
            '<h3>Project Specifications</h3>',
            '<ul>',
            '    <li><strong>Project Type:</strong> {{sessionType}} Commercial Photography</li>',
            '    <li><strong>Production Date:</strong> {{sessionDate}}</li>',
            '    <li><strong>Primary Location:</strong> {{location}}</li>',
            '    <li><strong>Production Duration:</strong> {{duration}} hours of coverage</li>',
            '    <li><strong>Client Contact:</strong> {{clientName}} | {{clientEmail}} | {{clientPhone}}</li>',
            '</ul>',
            '',
            '<h3>Investment & Payment Structure</h3>',
            '<ul>',
            '    <li><strong>Total Project Investment:</strong> ${{price}}</li>',
            '    <li><strong>Production Retainer (50%):</strong> ${{depositAmount}}</li>',
            '    <li><strong>Final Payment:</strong> ${{balanceAmount}}</li>',
            '    <li><strong>Payment Terms:</strong> Retainer due upon signing, balance due upon delivery</li>',
            '</ul>',
            '',
            '<h3>Professional Deliverables</h3>',
            '<ul>',
            '    <li><strong>High-Resolution Digital Files:</strong> Professional-grade edited images suitable for all commercial applications</li>',
            '    <li><strong>Full Commercial Usage License:</strong> Comprehensive rights for business marketing and promotional use</li>',
            '    <li><strong>Secure Digital Delivery:</strong> Professional gallery with download access and backup files</li>',
            '    <li><strong>Multiple Format Options:</strong> Web-optimized and print-ready file formats included</li>',
            '</ul>',
            '',
            '<h3>Commercial Usage Rights & Licensing</h3>',
            '<p><strong>Client receives unlimited commercial usage rights for:</strong></p>',
            '<ul>',
            '    <li><strong>Digital Marketing:</strong> Website, email campaigns, and online advertising</li>',
            '    <li><strong>Print Marketing:</strong> Brochures, business cards, advertisements, and promotional materials</li>',
            '    <li><strong>Social Media:</strong> All social platforms for business promotion and engagement</li>',
            '    <li><strong>Internal Business Use:</strong> Presentations, reports, and corporate communications</li>',
            '    <li><strong>Public Relations:</strong> Press releases and media kits</li>',
            '</ul>',
            '',
            '<h3>Professional Terms & Conditions</h3>',
            '<ol>',
            '    <li><strong>Payment Schedule:</strong> 50% production retainer secures project dates; final balance due within 30 days of delivery.</li>',
            '    <li><strong>Delivery Timeline:</strong> Final edited images delivered within 10 business days, ensuring quality and attention to detail.</li>',
            '    <li><strong>Revision Policy:</strong> One comprehensive round of reasonable editing revisions included to ensure client satisfaction.</li>',
            '    <li><strong>Portfolio Rights:</strong> Photographer retains right to use selected images for professional portfolio and marketing purposes.</li>',
            '    <li><strong>Rescheduling Policy:</strong> Project changes require 72-hour advance notice to accommodate production schedules.</li>',
            '    <li><strong>Client Preparation:</strong> Client responsible for location access, permits, and talent coordination as needed.</li>',
            '</ol>',
            '',
            '<h3>Professional Agreement</h3>',
            '<p>This agreement represents our commitment to delivering exceptional commercial photography that elevates your brand. Both parties acknowledge and agree to all terms specified above.</p>',
            '',
            '<div class="signature-section">',
            '    <p><strong>Client Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><strong>Photographer Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><em>{{clientName}} - {{clientEmail}} | {{clientPhone}}</em></p>',
            '</div>'
        ].join('\n')
    },
    event: {
        name: 'Event Photography Agreement',
        category: 'Event',
        content: [
            '<h2>Professional Event Photography Agreement</h2>',
            '<p><strong>This Professional Photography Agreement</strong> is entered into between {{photographerName}} ("Photographer") and {{clientName}} ("Client") for comprehensive event photography coverage.</p>',
            '',
            '<h3>Event Specifications</h3>',
            '<ul>',
            '    <li><strong>Event Name:</strong> {{eventName}}</li>',
            '    <li><strong>Event Date:</strong> {{sessionDate}}</li>',
            '    <li><strong>Coverage Hours:</strong> {{startTime}} to {{endTime}}</li>',
            '    <li><strong>Primary Venue:</strong> {{location}}</li>',
            '    <li><strong>Expected Attendance:</strong> {{attendeeCount}} guests</li>',
            '    <li><strong>Event Contact:</strong> {{clientName}} | {{clientEmail}} | {{clientPhone}}</li>',
            '</ul>',
            '',
            '<h3>Investment & Payment</h3>',
            '<ul>',
            '    <li><strong>Total Event Coverage Fee:</strong> ${{price}}</li>',
            '    <li><strong>Booking Retainer:</strong> ${{depositAmount}}</li>',
            '    <li><strong>Final Balance:</strong> ${{balanceAmount}}</li>',
            '    <li><strong>Payment Schedule:</strong> Retainer due upon booking, balance due day of event</li>',
            '</ul>',
            '',
            '<h3>Professional Services & Deliverables</h3>',
            '<ul>',
            '    <li><strong>Comprehensive Event Coverage:</strong> Professional documentation of key moments, candid interactions, and event atmosphere</li>',
            '    <li><strong>Artistic Event Photography:</strong> Blend of candid photojournalism and carefully composed group portraits</li>',
            '    <li><strong>High-Resolution Digital Gallery:</strong> Professionally edited images delivered via secure online platform</li>',
            '    <li><strong>Extended Gallery Access:</strong> 90-day online gallery for easy viewing, downloading, and sharing</li>',
            '    <li><strong>Group & VIP Coverage:</strong> Special attention to key attendees, speakers, and important moments</li>',
            '</ul>',
            '',
            '<h3>Coverage & Usage Rights</h3>',
            '<ul>',
            '    <li><strong>Event Documentation:</strong> Photographer will capture key moments, general event atmosphere, and important interactions</li>',
            '    <li><strong>Flexible Coverage:</strong> Adaptable approach based on event flow and special requests</li>',
            '    <li><strong>Marketing Usage:</strong> Client may use images for event promotion, marketing materials, and attendee sharing</li>',
            '    <li><strong>Social Media Rights:</strong> Full permission for social media sharing and event publicity</li>',
            '</ul>',
            '',
            '<h3>Professional Terms & Conditions</h3>',
            '<ol>',
            '    <li><strong>Payment Terms:</strong> Booking retainer secures event date exclusively; final balance due on event day before coverage begins.</li>',
            '    <li><strong>Delivery Timeline:</strong> Complete edited gallery delivered within 2 weeks, ensuring quality curation and professional editing.</li>',
            '    <li><strong>Event Coordination:</strong> Photographer will work seamlessly with event coordinators and venue staff for optimal coverage.</li>',
            '    <li><strong>Equipment & Backup:</strong> Professional-grade equipment with backup systems to ensure complete event documentation.</li>',
            '    <li><strong>Portfolio Usage:</strong> Selected images may be used for photographer\'s portfolio and marketing with client permission.</li>',
            '</ol>',
            '',
            '<h3>Event Agreement</h3>',
            '<p>This agreement ensures professional documentation of your special event. Both parties acknowledge and agree to all terms outlined above.</p>',
            '',
            '<div class="signature-section">',
            '    <p><strong>Client Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><strong>Photographer Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><em>{{clientName}} - {{clientEmail}} | {{clientPhone}}</em></p>',
            '</div>'
        ].join('\n')
    },
    mini: {
        name: 'Mini Session Agreement',
        category: 'Mini Session',
        content: [
            '<h2>Mini Photography Session Agreement</h2>',
            '<p><strong>This Mini Session Agreement</strong> is entered into between {{photographerName}} ("Photographer") and {{clientName}} ("Client") for a focused portrait session experience.</p>',
            '',
            '<h3>Session Specifications</h3>',
            '<ul>',
            '    <li><strong>Session Date:</strong> {{sessionDate}}</li>',
            '    <li><strong>Reserved Time Slot:</strong> {{sessionTime}}</li>',
            '    <li><strong>Session Location:</strong> {{location}}</li>',
            '    <li><strong>Session Duration:</strong> {{duration}} minutes of focused shooting</li>',
            '    <li><strong>Client Contact:</strong> {{clientName}} | {{clientEmail}} | {{clientPhone}}</li>',
            '</ul>',
            '',
            '<h3>Session Investment</h3>',
            '<ul>',
            '    <li><strong>Complete Session Fee:</strong> ${{price}}</li>',
            '    <li><strong>Payment Terms:</strong> Full payment due at time of booking</li>',
            '</ul>',
            '',
            '<h3>Mini Session Includes</h3>',
            '<ul>',
            '    <li><strong>Focused Photo Session:</strong> {{duration}} minutes of professional photography with expert direction</li>',
            '    <li><strong>Curated Digital Collection:</strong> {{imageCount}} beautifully edited, high-resolution digital images</li>',
            '    <li><strong>Private Online Gallery:</strong> Secure gallery for easy viewing, downloading, and sharing</li>',
            '    <li><strong>Full Print Release:</strong> Personal use license for unlimited printing and sharing</li>',
            '    <li><strong>Professional Guidance:</strong> Posing direction and styling suggestions for optimal results</li>',
            '</ul>',
            '',
            '<h3>Mini Session Policies</h3>',
            '<ul>',
            '    <li><strong>Session Commitment:</strong> Mini sessions are designed for efficiency and are non-refundable once booked</li>',
            '    <li><strong>Rescheduling Options:</strong> Date changes are subject to availability with 48-hour advance notice</li>',
            '    <li><strong>Quick Delivery:</strong> Your curated gallery will be delivered within 2 weeks for immediate enjoyment</li>',
            '    <li><strong>Additional Selections:</strong> Extra images from your session may be available for purchase</li>',
            '</ul>',
            '',
            '<h3>Mini Session Agreement</h3>',
            '<p>This streamlined agreement ensures a focused, efficient photography experience that captures beautiful moments in a shorter timeframe. Both parties acknowledge and agree to the terms outlined above.</p>',
            '',
            '<div class="signature-section">',
            '    <p><strong>Client Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><strong>Photographer Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><em>{{clientName}} - {{clientEmail}} | {{clientPhone}}</em></p>',
            '</div>'
        ].join('\n')
    },
    newborn: {
        name: 'Newborn/Maternity Agreement',
        category: 'Newborn/Maternity',
        content: [
            '<h2>Newborn & Maternity Photography Agreement</h2>',
            '<p><strong>This Specialized Photography Agreement</strong> is entered into between {{photographerName}} ("Photographer") and {{clientName}} ("Client") for professional newborn and maternity photography services.</p>',
            '',
            '<h3>Session Specifications</h3>',
            '<ul>',
            '    <li><strong>Session Type:</strong> {{sessionType}} Photography Experience</li>',
            '    <li><strong>Tentative Session Date:</strong> {{sessionDate}}</li>',
            '    <li><strong>Session Location:</strong> {{location}}</li>',
            '    <li><strong>Session Duration:</strong> Up to {{duration}} hours (flexible pacing)</li>',
            '    <li><strong>Family Contact:</strong> {{clientName}} | {{clientEmail}} | {{clientPhone}}</li>',
            '</ul>',
            '',
            '<h3>Investment & Payment</h3>',
            '<ul>',
            '    <li><strong>Complete Session Investment:</strong> ${{price}}</li>',
            '    <li><strong>Booking Deposit:</strong> ${{depositAmount}} (reserves your due date)</li>',
            '    <li><strong>Session Balance:</strong> ${{balanceAmount}}</li>',
            '    <li><strong>Payment Schedule:</strong> Deposit due at booking, balance due at session</li>',
            '</ul>',
            '',
            '<h3>Premium Services & Inclusions</h3>',
            '<ul>',
            '    <li><strong>Specialized Photography Session:</strong> Expert newborn handling and posing with safety-first approach</li>',
            '    <li><strong>Professional Props & Accessories:</strong> Extensive collection of newborn wraps, blankets, baskets, and positioning aids</li>',
            '    <li><strong>Artistically Edited Collection:</strong> {{imageCount}} beautifully edited, high-resolution digital images</li>',
            '    <li><strong>Extended Online Gallery:</strong> Secure gallery for easy viewing, downloading, and family sharing</li>',
            '    <li><strong>Complete Print Release:</strong> Full personal use license for unlimited printing and keepsakes</li>',
            '    <li><strong>Family Integration:</strong> Siblings and parents beautifully included at no additional charge</li>',
            '</ul>',
            '',
            '<h3>Specialized Newborn Considerations</h3>',
            '<ul>',
            '    <li><strong>Optimal Timing:</strong> Newborn sessions are most successful within 5-14 days after birth for natural posing</li>',
            '    <li><strong>Flexible Scheduling:</strong> Final session date confirmed after baby\'s arrival to ensure optimal timing</li>',
            '    <li><strong>Safety Priority:</strong> Baby\'s safety, comfort, and well-being are always the absolute top priority</li>',
            '    <li><strong>Natural Pacing:</strong> Sessions flow according to baby\'s needs including feeding, changing, and soothing breaks</li>',
            '    <li><strong>Temperature Controlled:</strong> Studio maintained at comfortable temperature for unclothed newborn poses</li>',
            '</ul>',
            '',
            '<h3>Professional Terms & Policies</h3>',
            '<ol>',
            '    <li><strong>Date Reservation:</strong> Booking deposit reserves your due date on our exclusive calendar with flexible scheduling window.</li>',
            '    <li><strong>Birth Notification:</strong> Please contact us within 24-48 hours of birth to schedule your optimal session date.</li>',
            '    <li><strong>Gallery Delivery:</strong> Your beautifully curated newborn gallery will be delivered within 3 weeks for immediate treasure.</li>',
            '    <li><strong>Family Inclusion:</strong> Parents and siblings are lovingly included in your session at no additional investment.</li>',
            '    <li><strong>Gentle Experience:</strong> Our approach prioritizes creating a calm, comfortable environment for your precious new family.</li>',
            '</ol>',
            '',
            '<h3>Family Agreement</h3>',
            '<p>This specialized agreement ensures the safest, most beautiful documentation of your precious newborn and growing family. Both parties acknowledge and agree to all terms outlined above.</p>',
            '',
            '<div class="signature-section">',
            '    <p><strong>Client Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><strong>Photographer Signature:</strong> ___________________________ <strong>Date:</strong> _______________</p>',
            '    <br>',
            '    <p><em>{{clientName}} - {{clientEmail}} | {{clientPhone}}</em></p>',
            '</div>'
        ].join('\n')
    }
};

// Function to initialize templates in database
async function initializeTemplates(pool) {
    const client = await pool.connect();
    try {
        // First, check if templates already exist
        for (const [key, template] of Object.entries(bookingAgreementTemplates)) {
            const checkResult = await client.query(
                'SELECT id FROM booking_agreement_templates WHERE name = $1',
                [template.name]
            );
            
            if (checkResult.rows.length === 0) {
                // Insert new template
                await client.query(
                    'INSERT INTO booking_agreement_templates (name, category, content, is_default) ' +
                    'VALUES ($1, $2, $3, $4)',
                    [template.name, template.category, template.content, key === 'portrait']
                );
            } else {
                // Update existing template
                await client.query(
                    'UPDATE booking_agreement_templates ' +
                    'SET content = $2, category = $3, updated_at = NOW() ' +
                    'WHERE name = $1',
                    [template.name, template.content, template.category]
                );
            }
        }
        console.log('✅ Booking agreement templates initialized');
    } catch (error) {
        console.error('Error initializing templates:', error);
    } finally {
        client.release();
    }
}

module.exports = { bookingAgreementTemplates, initializeTemplates };