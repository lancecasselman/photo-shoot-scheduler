Task:
Integrate an OpenAI-powered assistant into the website builder, available on every page and block, to help subscribers with all aspects of building their website. All AI features should use a token-based credit system with purchases handled via Stripe. Implement as follows:

Requirements
AI Assistant Accessibility

Add a floating AI Assistant button or sidebar, visible on every builder screen.

The assistant should offer help for:

Writing or rewriting any text (hero, about, gallery captions, SEO, testimonials, etc.)

Generating photo captions, alt text, or content ideas

Answering questions about site building, layout, or best practices

“Write My Site” (user describes business, AI generates starter copy for all major sections)

Users can invoke the assistant from any editable block or via the sidebar at any time.

Token/Credit System

All AI usage is metered by tokens.

Track each subscriber’s token balance and decrement per use, showing live usage in the builder.

Display clear bundle purchase options in-app:

$1 for 1,000 tokens

$4.99 for 5,000 tokens

$8.99 for 10,000 tokens

$19.99 for 25,000 tokens

$34.99 for 50,000 tokens

Stripe Integration

Integrate Stripe for in-app purchase of tokens/credits.

Allow instant reload of credits after purchase.

Update user’s credit balance automatically on successful purchase.

Ensure all transactions and credit balances are securely tracked and logged.

OpenAI Integration

Use a secure backend proxy (Node/Express or Firebase Function) to handle all OpenAI API calls (never expose API key to the client).

Each AI action calculates and deducts the correct token count.

If user runs out of credits, prompt to purchase more tokens via Stripe.

UX/UI

Show remaining token balance in the builder at all times.

Make the AI Assistant and all “AI Write” buttons clearly visible but unobtrusive.

Use a draggable panel for the assistant so it never covers content.

No emojis in UI, comments, or code.

Safety & Comments

Require user confirmation before any AI output overwrites existing content.

Add clear code comments and documentation for each part of the integration.

Thoroughly test for proper token deduction, credit purchase, and AI feature operation.

Sample Agent Implementation Steps
Add the AI Assistant button/sidebar to the builder UI.

Implement the OpenAI backend proxy for all completions/requests.

Integrate Stripe’s API for in-app token purchases.

Build a token/credit management system (purchase, usage, balance display).

Add the AI helper buttons to all editable fields and blocks.

Ensure the AI Assistant and formatting panels are draggable/movable.

Test for token metering, purchases, usage, and user experience.

Document all changes in the codebase.

